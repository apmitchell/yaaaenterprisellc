<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Learn AI Coding – Starter Course</title>
  <style>
    :root{
      --bg:#e6f0ee; --ink:#0f2b3a; --accent:#ff8b3d; --muted:#22485b;
      --card:#ffffff; --ok:#137d60; --warn:#b23b00;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--ink); background:linear-gradient(135deg,#d8ece9 0%,#c9e0ef 40%,#d9f1ea 100%);
    }
    .wrap{max-width:980px;margin:32px auto;padding:16px}
    .hero{
      background:var(--card); border-radius:20px; padding:28px; box-shadow:0 10px 30px rgba(0,0,0,.08);
    }
    .badge{display:inline-block;background:#f9d76e;color:#3a2a00;font-weight:700;padding:6px 12px;border-radius:999px}
    h1{margin:.4rem 0 0;font-size:clamp(28px,4vw,44px);line-height:1.05}
    h1 .em{color:var(--accent)}
    .sub{color:var(--muted);font-weight:600;margin:10px 0 20px}
    .price{font-size:28px;font-weight:800;margin:6px 0}
    .price-container{display:flex;align-items:baseline;gap:12px;margin:6px 0}
    .original-price{font-size:20px;color:#999;text-decoration:line-through;font-weight:600}
    .early-bird{font-size:13px;color:#137d60;font-weight:700;background:#eef8f4;padding:4px 8px;border-radius:6px;margin-top:4px}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:28px}
    @media (max-width:880px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card); border-radius:16px; padding:20px; box-shadow:0 8px 24px rgba(0,0,0,.06)}
    label{display:block;font-weight:700;margin:14px 0 8px}
    input, textarea, button{
      width:100%; padding:12px 14px; border:2px solid #d7e3ea; border-radius:10px; font:inherit; background:#fff;
    }
    input:focus, textarea:focus{outline:none;border-color:#7fb5ff;box-shadow:0 0 0 4px rgba(127,181,255,.15)}
    small.help{display:block;color:#557086;margin-top:6px}
    .error{color:var(--warn);font-weight:700;margin-top:8px}
    .ok{color:var(--ok);font-weight:700;margin-top:8px}
    ul.schedule{margin:10px 0 0 18px}
    .cta{margin-top:16px;background:var(--ink);color:#fff;border:none;font-weight:800;cursor:pointer}
    .cta[disabled]{opacity:.5;cursor:not-allowed}
    .foot{margin-top:16px;color:#476373}

    /* --- Right card upgrades --- */
    .value-card{display:flex;flex-direction:column;gap:16px}
    .value-section{margin-top:4px}
    .value-title{margin:6px 0 8px;font-size:18px}
    .value-list{margin:0 0 6px 18px;padding:0}
    .value-list li{margin:6px 0}

    .instructor{display:flex;align-items:center;gap:12px;background:#f7fbff;border:1px solid #e1edf7;border-radius:12px;padding:12px}
    .avatar{
      width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;
      font-weight:800;background:#0f2b3a;color:#fff;line-height:1;aspect-ratio:1/1;
    }
    .who{font-weight:800}
    .cred{color:#577189;font-size:14px}

    .divider{border:none;border-top:1px solid #e8eef2;margin:4px 0}

    .social-proof{margin-top:2px}
    .testi{position:relative;min-height:150px}
    .quote{display:none;margin:0}
    .quote.active{display:block;animation:fade .4s ease}
    @keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}
    blockquote{
      margin:0 0 10px; font-size:16px; line-height:1.45; color:#13394a;
      position:relative; padding-left:28px;
    }
    blockquote:before{
      content:"“"; position:absolute; left:0; top:-6px; font-size:38px; line-height:1; color:#ff8b3d;
    }
    figcaption{display:flex;align-items:center;gap:10px}
    .mini-avatar{
      width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;
      font-weight:800;background:#ffd7bf;color:#7b360d;flex:0 0 auto;line-height:1;aspect-ratio:1/1;
    }
    .name{font-weight:800}
    .role{color:#577189;font-size:13px}

    .dots{display:flex;gap:6px;margin-top:10px}
    .dots button{
      width:10px;height:10px;border-radius:50%;border:none;background:#cddae3;cursor:pointer;
      padding:0;flex:0 0 auto;
    }
    .dots button.active{background:#0f2b3a}

    .guarantee{
      display:flex;gap:8px;align-items:flex-start;
      font-size:14px;color:#2c5a4e;background:#eef8f4;border:1px solid #cfeae0;border-radius:12px;padding:10px 12px
    }
    .check{
      display:inline-flex;align-items:center;justify-content:center;
      width:20px;height:20px;aspect-ratio:1/1;border-radius:50%;
      background:#137d60;flex:0 0 20px;
    }
    .check svg{display:block}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <span class="badge">4-WEEK</span>
      <h1>Build Your First <span class="em">AI-Powered App</span> in 4 Weeks</h1>
      <div class="sub">No Experience Needed • Savannah · 6:00pm cohorts (Mon/Tue)</div>
      <div class="grid">
        <!-- LEFT: FORM -->
        <form id="regForm" class="card" onsubmit="return false">
          <label for="fullName">Full Name</label>
          <input id="fullName" autocomplete="name" required />

          <label for="email">Email</label>
          <input id="email" type="email" autocomplete="email" required />

          <label for="startDate">Choose Your Start Date</label>
          <input id="startDate" type="date" required />
          <small class="help">
            Only allowed: <em>1st Monday</em> or <em>1st Tuesday</em> of a month. Meets weekly at <strong>6:00 PM</strong> for 4 weeks.
          </small>
          <div id="dateMsg" class="error" style="display:none"></div>

          <label for="goal">What do you hope to get out of the course?</label>
          <textarea id="goal" rows="4" placeholder="Tell us your goal (optional)"></textarea>

          <div id="cohortInfo" class="ok" style="display:none"></div>
          <ul id="schedule" class="schedule"></ul>

          <button id="payBtn" class="cta" disabled>Register — Go to Checkout</button>
          <div class="foot">$99 + includes $200 in free cloud credits</div>
        </form>

        <!-- RIGHT: VALUE + SOCIAL PROOF -->
        <div class="card value-card">
          <div class="price-container">
            <div class="price">$99</div>
            <div class="original-price">$199</div>
          </div>
          <div class="early-bird">✨ Special Savannah launch pricing — save $100!</div>

          <div class="value-section">
            <h3 class="value-title">What you’ll build & learn</h3>
            <ul class="value-list">
              <li>Code your first AI-powered app</li>
              <li>Use AI tools to automate real work</li>
              <li>Ship a project you can show employers/clients</li>
              <li>Roadmap for turning skills into income</li>
            </ul>
          </div>

          <div class="instructor">
            <div class="avatar">AM</div>
            <div>
              <div class="who">Led by Aaron Mitchell</div>
              <div class="cred">Engineering Leader @ DigitalOcean • ex-Twilio</div>
            </div>
          </div>

          <hr class="divider" />

          <div class="social-proof">
            <h3 class="value-title">What people say</h3>

            <div class="testi" id="testi">
              <figure class="quote active">
                <blockquote>
                  “Aaron built trust fast, added the right structure, and drove a too-big-to-fail project to completion ahead of schedule. I’d re-hire him in a heartbeat.”
                </blockquote>
                <figcaption>
                  <span class="mini-avatar">KL</span>
                  <div>
                    <div class="name">Kelly Lu</div>
                    <div class="role">Director of Engineering, DigitalOcean • ex-Twilio</div>
                  </div>
                </figcaption>
              </figure>

              <figure class="quote">
                <blockquote>
                  “He shielded engineers so we could focus and ship highly scalable work. Prepared, thoughtful, and a joy to work with.”
                </blockquote>
                <figcaption>
                  <span class="mini-avatar">ST</span>
                  <div>
                    <div class="name">Samuel Tapia</div>
                    <div class="role">Senior Software Engineer, Twilio</div>
                  </div>
                </figcaption>
              </figure>

              <figure class="quote">
                <blockquote>
                  “Aaron gives clarity, solves root causes, and empowers people. One of the best leaders I’ve worked with.”
                </blockquote>
                <figcaption>
                  <span class="mini-avatar">DT</span>
                  <div>
                    <div class="name">Drew Thompson</div>
                    <div class="role">Staff Product Engineer, Segment</div>
                  </div>
                </figcaption>
              </figure>

              <figure class="quote">
                <blockquote>
                  “Promoting Aaron to EM was the best decision I made. World-class product instincts, system design, and culture building.”
                </blockquote>
                <figcaption>
                  <span class="mini-avatar">PC</span>
                  <div>
                    <div class="name">Paras Chadha</div>
                    <div class="role">Head of Engineering, Block • ex-Meta/Amazon/Twitch</div>
                  </div>
                </figcaption>
              </figure>
            </div>

            <div class="dots" id="dots" aria-label="testimonial navigation"></div>
          </div>

          <div class="guarantee">
            <span class="check" aria-hidden="true">
              <svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                <path d="M4.6 8.2L2.4 6l-.8.8 3 3 5-5-.8-.8-4.2 4.2z" fill="#fff"/>
              </svg>
            </span>
            Practical, hands-on sessions. If you don’t leave with a working app and a clear next-step plan, tell us and we’ll make it right.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ---------- Helper functions ----------
    const $ = (id) => document.getElementById(id);
    const startDate = $('startDate');
    const dateMsg = $('dateMsg');
    const cohortInfo = $('cohortInfo');
    const scheduleList = $('schedule');
    const payBtn = $('payBtn');
    const email = $('email');
    const fullName = $('fullName');

    function toISODate(d){ return d.toISOString().slice(0,10); }
    function addDays(d,n){ const x=new Date(d); x.setDate(x.getDate()+n); return x; }
    function fmt(d){ return d.toLocaleDateString(undefined,{weekday:'long', month:'long', day:'numeric', year:'numeric'}); }
    function validEmail(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.trim()); }

    // nth weekday of month (weekday: 0=Sun..6=Sat)
    function nthWeekdayOfMonth(year, month, weekday, n){
      const first = new Date(year, month, 1);
      const delta = (weekday - first.getDay() + 7) % 7;
      const day = 1 + delta + 7*(n-1);
      const c = new Date(year, month, day);
      return c.getMonth() === month ? c : null;
    }
    function isFirstMonday(d){
      const m1 = nthWeekdayOfMonth(d.getFullYear(), d.getMonth(), 1, 1);
      return m1 && toISODate(m1) === toISODate(d);
    }
    function isFirstTuesday(d){
      const t1 = nthWeekdayOfMonth(d.getFullYear(), d.getMonth(), 2, 1);
      return t1 && toISODate(t1) === toISODate(d);
    }
    function computeFourWeekSchedule(start){
      return [0,1,2,3].map(i => addDays(start, 7*i));
    }

    // ---------- Init: min date + suggest next valid date ----------
    (function(){
      const today = new Date(); today.setHours(0,0,0,0);
      startDate.min = toISODate(today);

      // find next valid (1st Mon or 1st Tue)
      const out=[];
      let probe = new Date(today.getFullYear(), today.getMonth(), 1);
      for (let i=0; out.length<1 && i<18; i++){
        const y=probe.getFullYear(), m=probe.getMonth();
        const firstMon = nthWeekdayOfMonth(y,m,1,1);
        const firstTue = nthWeekdayOfMonth(y,m,2,1);
        [firstMon, firstTue].forEach(dt=>{ if(dt && dt>=today) out.push(dt); });
        probe = new Date(y, m+1, 1);
      }
      if(out.length){ startDate.value = toISODate(out.sort((a,b)=>a-b)[0]); }
      validateDateAndUpdate();
      validateAll();
    })();

    function validateDateAndUpdate(){
      const v = startDate.value;
      if(!v){ showInvalid("Please pick a start date."); return false; }
      const d = new Date(v+"T00:00:00");
      const ok = isFirstMonday(d) || isFirstTuesday(d);
      if(!ok){
        showInvalid("Selected date must be the 1st Monday or 1st Tuesday of that month.");
        return false;
      }
      // valid → render schedule
      const dayName = d.toLocaleDateString(undefined,{weekday:'long'});
      const timeText = "6:00 PM";
      dateMsg.style.display="none";
      cohortInfo.style.display="block";
      cohortInfo.textContent = `${dayName} Cohort · Starts ${fmt(d)} · Meets weekly at ${timeText} for 4 weeks.`;
      const sessions = computeFourWeekSchedule(d);
      scheduleList.innerHTML = sessions.map(s=>`<li>${fmt(s)} · 6:00 PM</li>`).join('');
      return true;
    }

    function showInvalid(msg){
      cohortInfo.style.display="none";
      scheduleList.innerHTML="";
      dateMsg.style.display="block";
      dateMsg.textContent = msg;
    }

    function validateAll(){
      const ok = fullName.value.trim().length>1 &&
                 validEmail(email.value) &&
                 validateDateAndUpdate();
      payBtn.disabled = !ok;
      return ok;
    }

    startDate.addEventListener('change', ()=>{ validateDateAndUpdate(); validateAll(); });
    email.addEventListener('input', validateAll);
    fullName.addEventListener('input', validateAll);

    // ---------- Submit: DO Function + Stripe ----------
    payBtn.addEventListener('click', ()=>{
      if(!validateAll()) return;
      const d = new Date(startDate.value+"T00:00:00");
      const dayName = d.toLocaleDateString(undefined,{weekday:'long'});
      const cohort = (dayName==="Monday") ? "monday-6pm" : "tuesday-6pm";
      const goalText = document.getElementById('goal').value.trim();

      // Send to DigitalOcean Function (web action URL)
      fetch("https://faas-nyc1-2ef2e6cc.doserverless.co/api/v1/web/fn-a0337201-782d-4986-ba08-19b2e54d33ea/default/learn-ai-coding-start-course-registrations", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: document.getElementById('fullName').value.trim(),
          email: document.getElementById('email').value.trim(),
          start_date: toISODate(d),
          goal: goalText,          // server maps to Notion 'expectation'
          cohort                   // string e.g., 'monday-6pm'
        }),
        keepalive: true
      }).catch(()=>{});

      // Stripe redirect (with params)
      const STRIPE_CHECKOUT = "https://buy.stripe.com/test_8x2aEW1zNc9qc1xe9sbZe00";
      // const STRIPE_CHECKOUT = "https://book.stripe.com/8x2aEW1zNc9qc1xe9sbZe00";
      window.location.href = `${STRIPE_CHECKOUT}?locked_prefilled_email=${encodeURIComponent(document.getElementById('email').value.trim())}`;
    });

    // ---------- Testimonials slider ----------
    (function(){
      const container = document.getElementById('testi');
      if(!container) return;
      const slides = Array.from(container.querySelectorAll('.quote'));
      const dotsWrap = document.getElementById('dots');
      let idx = 0, timer;

      function renderDots(){
        dotsWrap.innerHTML = slides.map((_,i)=>`<button aria-label="Go to testimonial ${i+1}"></button>`).join('');
        dotsWrap.querySelectorAll('button').forEach((b,i)=> b.addEventListener('click', ()=>go(i)));
      }
      function setActive(i){
        slides.forEach((s,k)=>s.classList.toggle('active', k===i));
        dotsWrap.querySelectorAll('button').forEach((b,k)=>b.classList.toggle('active', k===i));
      }
      function go(i){ idx = (i+slides.length)%slides.length; setActive(idx); restart(); }
      function next(){ go(idx+1); }
      function restart(){ clearInterval(timer); timer = setInterval(next, 6000); }

      renderDots(); setActive(idx); restart();
    })();
  </script>
</body>
</html>
